var ImageCrop=function(){"use strict";function t(t){if(!t)throw Error("Node is not passed or invalid selector.");var e=t;if("string"==typeof e&&(e=document.querySelector(t),!e))throw Error("Invalid selector.");if(!(e instanceof window.HTMLElement))throw Error("Node should be instance of window.HTMLElement or valid selector string.");return e}function e(t){if(!t)throw Error("Config is not passed or invalid.");if("[object Object]"!==Object.prototype.toString.call(t))throw Error("Invalid config.")}function n(t){if(!t&&0!==t)throw Error("Dimension is not passed or invalid.");if("number"!=typeof t)throw Error("Invalid dimension.");if(!isFinite(t))throw Error("Invalid dimension.");if(t<0)throw Error("Invalid dimension.");return t}function i(t){if("undefined"==typeof t)return function(){};if(!t||"function"!=typeof t)throw Error("Invalid callback.");return t}function r(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function o(t,e){return e={exports:{}},t(e,e.exports),e.exports}var s={width:560,height:340},a={cutout:{fill:"rgba(0, 0, 0, 0.3)"},pattern:{size:16,fill1:"rgb(215, 215, 215)",fill2:"rgb(250, 250, 250)"}},h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(i)},f=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},_=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},d=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u(this,t),this.width=e,this.height=n},g=function(){function t(e){if(u(this,t),this._node=e,!e||"string"==typeof e){if("svg"===e||"use"===e)return void(this._node=document.createElementNS("http://www.w3.org/2000/svg",e));this._node=document.createElement(e||"div")}}return c(t,[{key:"render",value:function(t){if(!t)throw Error("Parent node are not passed.");return t.appendChild(this._node),this}},{key:"setWidth",value:function(t){return this._node.width=t,this}},{key:"setHeight",value:function(t){return this._node.height=t,this}},{key:"getSize",value:function(){return new d(this._node.width,this._node.height)}},{key:"getNode",value:function(){return this._node}},{key:"getContext2d",value:function(){return this._node.getContext("2d")}},{key:"setType",value:function(t){return this._node.type=t,this}},{key:"addClass",value:function(t){return this._node.className+=this._node.className.length>1?" "+t:t,this}},{key:"setAttribute",value:function(t,e){return this._node.setAttribute(t,e),this}}]),t}(),v="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},y=o(function(t,e){!function(e,n){t.exports=n()}(v,function(){function t(t){return"function"==typeof t||"object"===("undefined"==typeof t?"undefined":h(t))&&null!==t}function e(t){return"function"==typeof t}function n(t){K=t}function i(t){G=t}function o(){return function(){return process.nextTick(l)}}function s(){return"undefined"!=typeof V?function(){V(l)}:c()}function a(){var t=0,e=new $(l),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function u(){var t=new MessageChannel;return t.port1.onmessage=l,function(){return t.port2.postMessage(0)}}function c(){var t=setTimeout;return function(){return t(l,1)}}function l(){for(var t=0;t<B;t+=2){var e=nt[t],n=nt[t+1];e(n),nt[t]=void 0,nt[t+1]=void 0}B=0}function f(){try{var t=r,e=t("vertx");return V=e.runOnLoop||e.runOnContext,s()}catch(t){return c()}}function _(t,e){var n=arguments,i=this,r=new this.constructor(g);void 0===r[rt]&&A(r);var o=i._state;return o?!function(){var t=n[o-1];G(function(){return R(o,r,t,i._result)})}():E(i,r,t,e),r}function d(t){var e=this;if(t&&"object"===("undefined"==typeof t?"undefined":h(t))&&t.constructor===e)return t;var n=new e(g);return P(n,t),n}function g(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function m(){return new TypeError("A promises callback cannot return that same promise.")}function p(t){try{return t.then}catch(t){return ht.error=t,ht}}function w(t,e,n,i){try{t.call(e,n,i)}catch(t){return t}}function b(t,e,n){G(function(t){var i=!1,r=w(n,e,function(n){i||(i=!0,e!==n?P(t,n):S(t,n))},function(e){i||(i=!0,N(t,e))},"Settle: "+(t._label||" unknown promise"));!i&&r&&(i=!0,N(t,r))},t)}function k(t,e){e._state===st?S(t,e._result):e._state===at?N(t,e._result):E(e,void 0,function(e){return P(t,e)},function(e){return N(t,e)})}function x(t,n,i){n.constructor===t.constructor&&i===_&&n.constructor.resolve===d?k(t,n):i===ht?N(t,ht.error):void 0===i?S(t,n):e(i)?b(t,n,i):S(t,n)}function P(e,n){e===n?N(e,y()):t(n)?x(e,n,p(n)):S(e,n)}function C(t){t._onerror&&t._onerror(t._result),M(t)}function S(t,e){t._state===ot&&(t._result=e,t._state=st,0!==t._subscribers.length&&G(M,t))}function N(t,e){t._state===ot&&(t._state=at,t._result=e,G(C,t))}function E(t,e,n,i){var r=t._subscribers,o=r.length;t._onerror=null,r[o]=e,r[o+st]=n,r[o+at]=i,0===o&&t._state&&G(M,t)}function M(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var i=void 0,r=void 0,o=t._result,s=0;s<e.length;s+=3)i=e[s],r=e[s+n],i?R(n,i,r,o):r(o);t._subscribers.length=0}}function z(){this.error=null}function O(t,e){try{return t(e)}catch(t){return ut.error=t,ut}}function R(t,n,i,r){var o=e(i),s=void 0,a=void 0,h=void 0,u=void 0;if(o){if(s=O(i,r),s===ut?(u=!0,a=s.error,s=null):h=!0,n===s)return void N(n,m())}else s=r,h=!0;n._state!==ot||(o&&h?P(n,s):u?N(n,a):t===st?S(n,s):t===at&&N(n,s))}function H(t,e){try{e(function(e){P(t,e)},function(e){N(t,e)})}catch(e){N(t,e)}}function j(){return ct++}function A(t){t[rt]=ct++,t._state=void 0,t._result=void 0,t._subscribers=[]}function I(t,e){this._instanceConstructor=t,this.promise=new t(g),this.promise[rt]||A(this.promise),q(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&S(this.promise,this._result))):N(this.promise,T())}function T(){return new Error("Array Methods must be provided an Array")}function L(t){return new I(this,t).promise}function Y(t){var e=this;return new e(q(t)?function(n,i){for(var r=t.length,o=0;o<r;o++)e.resolve(t[o]).then(n,i)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function X(t){var e=this,n=new e(g);return N(n,t),n}function D(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function F(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function W(t){this[rt]=j(),this._result=this._state=void 0,this._subscribers=[],g!==t&&("function"!=typeof t&&D(),this instanceof W?H(this,t):F())}function Z(){var t=void 0;if("undefined"!=typeof v)t=v;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=W}var U=void 0;U=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var q=U,B=0,V=void 0,K=void 0,G=function(t,e){nt[B]=t,nt[B+1]=e,B+=2,2===B&&(K?K(l):it())},J="undefined"!=typeof window?window:void 0,Q=J||{},$=Q.MutationObserver||Q.WebKitMutationObserver,tt="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),et="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,nt=new Array(1e3),it=void 0;it=tt?o():$?a():et?u():void 0===J&&"function"==typeof r?f():c();var rt=Math.random().toString(36).substring(16),ot=void 0,st=1,at=2,ht=new z,ut=new z,ct=0;return I.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===ot&&n<t;n++)this._eachEntry(e[n],n)},I.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,i=n.resolve;if(i===d){var r=p(t);if(r===_&&t._state!==ot)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(n===W){var o=new n(g);x(o,t,r),this._willSettleAt(o,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(i(t),e)},I.prototype._settledAt=function(t,e,n){var i=this.promise;i._state===ot&&(this._remaining--,t===at?N(i,n):this._result[e]=n),0===this._remaining&&S(i,this._result)},I.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){return n._settledAt(st,e,t)},function(t){return n._settledAt(at,e,t)})},W.all=L,W.race=Y,W.resolve=d,W.reject=X,W._setScheduler=n,W._setAsap=i,W._asap=G,W.prototype={constructor:W,then:_,catch:function(t){return this.then(null,t)}},W.polyfill=Z,W.Promise=W,W})}),m=function(t){function e(){u(this,e);var t=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"img"));return t._scale=t._originScale=1,t._zoom=0,t}return f(e,t),c(e,[{key:"load",value:function(t){var e=this;return new y(function(n,i){e.getNode().onload=function(){e._checkFormat(),n(e)},e.getNode().onerror=function(){i(Error("Can't load an image."))},e.getNode().src=t,e.getNode().crossOrigin="Anonymous"})}},{key:"isPortrait",value:function(){return"portrait"===this._checkFormat()}},{key:"isLandscape",value:function(){return"landscape"===this._checkFormat()}},{key:"isSquare",value:function(){return"square"===this._checkFormat()}},{key:"scaleToFit",value:function(t){var e=t.getRect().size.width/this.getNode().width,n=t.getRect().size.height/this.getNode().height,i=e>n?e:n;return this._scale=this._originScale=i,this._scale}},{key:"getSize",value:function(){var t=this.getNode().width*this._scale,e=this.getNode().height*this._scale;return new d(t,e)}},{key:"setZoom",value:function(t){return this._zoom=t,this._scale=this._originScale+this._originScale*t,this}},{key:"getZoom",value:function(){return this._zoom}},{key:"getScale",value:function(){return this._scale}},{key:"getOriginScale",value:function(){return this._originScale}},{key:"_checkFormat",value:function(){return this.getNode().width>this.getNode().height?"landscape":this.getNode().width<this.getNode().height?"portrait":"square"}}]),e}(g),p=function(){function t(e){u(this,t),this._context=e}return c(t,[{key:"fillRect",value:function(t,e,n,i){return this._context.fillRect(t,e,n,i)}},{key:"fillStyle",value:function(t){return this._context.fillStyle=t}},{key:"createPattern",value:function(t,e){return this._context.createPattern(t,e)}},{key:"rect",value:function(t,e,n,i){return this._context.rect(t,e,n,i)}},{key:"fill",value:function(){return this._context.fill()}},{key:"beginPath",value:function(){return this._context.beginPath()}},{key:"moveTo",value:function(t,e){return this._context.moveTo(t,e)}},{key:"lineTo",value:function(t,e){return this._context.lineTo(t,e)}},{key:"closePath",value:function(){return this._context.closePath()}},{key:"clearRect",value:function(t,e,n,i){return this._context.clearRect(t,e,n,i)}},{key:"drawImage",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._context.drawImage.apply(this._context,e)}}]),t}(),w=function(t){function e(){u(this,e);var t=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"canvas"));return t._context=new p(t._node.getContext("2d")),t.setWidth(a.pattern.size),t.setHeight(a.pattern.size),t._draw(),t}return f(e,t),c(e,[{key:"_draw",value:function(){return this._context.fillStyle(a.pattern.fill1),this._context.fillRect(0,0,8,8),this._context.fillStyle(a.pattern.fill2),this._context.fillRect(8,0,8,8),this._context.fillRect(0,8,8,8),this._context.fillStyle(a.pattern.fill1),this._context.fillRect(8,8,8,8),this}}]),e}(g),b=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u(this,t),this.x=e,this.y=n},k=.85,x=function(){function t(){u(this,t),this._size=0,this._origin={x:0,y:0}}return c(t,[{key:"update",value:function(t){return this._size=t.width>t.height?t.height*k:t.width*k,this._origin={x:(t.width-this._size)/2,y:(t.height-this._size)/2},this}},{key:"getRect",value:function(){return{origin:new b(this._origin.x,this._origin.y),size:new d(this._size,this._size)}}},{key:"getMinX",value:function(){return this._origin.x}},{key:"getMaxX",value:function(){return this._origin.x+this._size}},{key:"getMidX",value:function(){return this._origin.x+this._size/2}},{key:"getMinY",value:function(){return this._origin.y}},{key:"getMaxY",value:function(){return this._origin.y+this._size}},{key:"getMidY",value:function(){return this._origin.y+this._size/2}}]),t}(),P=function(){function t(e,n){u(this,t),this._frame=e,this._canvas=n,this._context=new p(this._canvas.getNode().getContext("2d"))}return c(t,[{key:"draw",value:function(){return this._context.fillStyle(a.cutout.fill),this._context.beginPath(),this._context.rect(0,0,this._canvas.getNode().width,this._canvas.getNode().height),this._context.moveTo(this._frame.getMinX(),this._frame.getMinY()),this._context.lineTo(this._frame.getMinX(),this._frame.getMaxY()),this._context.lineTo(this._frame.getMaxX(),this._frame.getMaxY()),this._context.lineTo(this._frame.getMaxX(),this._frame.getMinY()),this._context.closePath(),this._context.fill(),this}}]),t}(),C=function(t){function e(t,n){u(this,e);var i=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"canvas"));return i._frame=t,i._canvas=n,i._context=new p(i._node.getContext("2d")),i}return f(e,t),c(e,[{key:"toDataURL",value:function(){return this.setWidth(this._frame.getRect().size.width),this.setHeight(this._frame.getRect().size.height),this._context.drawImage(this._canvas.getNode(),this._frame.getMinX(),this._frame.getMinY(),this._frame.getRect().size.width,this._frame.getRect().size.height,0,0,this._frame.getRect().size.width,this._frame.getRect().size.height),this.getNode().toDataURL()}}]),e}(g),S=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new g(document.body);u(this,t),this._element=e,this._parent=n,this._onMoveCallback=function(){},this._onPressCallback=function(){},this._onReleaseCallback=function(){},this._onReleaseHandler=this.onReleaseHandler.bind(this),this._onPressHandler=this.onPressHandler.bind(this),this._onMoveHandler=this.onMoveHandler.bind(this)}return c(t,[{key:"onMove",value:function(t){this._onMoveCallback=t}},{key:"onPress",value:function(t){this._onPressCallback=t}},{key:"onRelease",value:function(t){this._onReleaseCallback=t}},{key:"init",value:function(){this._element.getNode().addEventListener("mousedown",this._onPressHandler,!1),this._element.getNode().addEventListener("touchstart",this._onPressHandler,!1),this._parent.getNode().addEventListener("mouseup",this._onReleaseHandler,!1),this._parent.getNode().addEventListener("touchend",this._onReleaseHandler,!1)}},{key:"onMoveHandler",value:function(t){this._onMoveCallback(this._getEventPoint(t))}},{key:"onPressHandler",value:function(t){this._parent.getNode().addEventListener("mousemove",this._onMoveHandler,!1),this._parent.getNode().addEventListener("touchmove",this._onMoveHandler,!1),this._onPressCallback(this._getEventPoint(t))}},{key:"onReleaseHandler",value:function(t){this._parent.getNode().removeEventListener("mousemove",this._onMoveHandler,!1),this._parent.getNode().removeEventListener("touchmove",this._onMoveHandler,!1),this._onReleaseCallback(this._getEventPoint(t))}},{key:"_convertCoordinates",value:function(t){var e=this._element.getNode().getBoundingClientRect(),n=t.x-e.left*(this._element.getNode().width/e.width),i=t.y-e.top*(this._element.getNode().height/e.height);return new b(n,i)}},{key:"_getEventPoint",value:function(t){var e=t.clientX||t.touches[0].clientX,n=t.clientY||t.touches[0].clientY;return this._convertCoordinates(new b(e,n))}}]),t}(),N=function(t){function e(){u(this,e);var t=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"canvas"));return t._context=new p(t._node.getContext("2d")),t._image=new m,t._pattern=new w,t._frame=new x,t._cutout=new P(t._frame,t),t._generator=new C(t._frame,t),t._moveEventListener=new S(t),t._lastPoint=new b(0,0),t._basePoint=new b(0,0),t._onChangeCallback=function(){},t}return f(e,t),c(e,[{key:"render",value:function(t){var n=this;return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"render",this).call(this,t),this._drawBackground(),this._moveEventListener.init(),this._moveEventListener.onPress(function(t){n._lastPoint=t}),this._moveEventListener.onMove(function(t){n._drawImage(t)}),this}},{key:"setWidth",value:function(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setWidth",this).call(this,t),this._frame.update(this.getNode()),this}},{key:"setHeight",value:function(t){return l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setHeight",this).call(this,t),this._frame.update(this.getNode()),this}},{key:"setImage",value:function(t){return this._resetPoints(),this._image=t,this._image.scaleToFit(this._frame),this}},{key:"draw",value:function(){return this._drawImage(this._centerImagePoint()),this}},{key:"redraw",value:function(){return this._resetPoints(),this._image.scaleToFit(this._frame),this.draw(),this}},{key:"clear",value:function(){return this._context.clearRect(0,0,this.getNode().width,this.getNode().height),this}},{key:"toDataURL",value:function(){return this._generator.toDataURL()}},{key:"setZoom",value:function(t){var e=this._image.getSize();this._image.setZoom(t);var n=this._image.getSize(),i=this._lastPoint.x-(n.width-e.width)/2,r=this._lastPoint.y-(n.height-e.height)/2;return this._drawImage(new b(i,r)),this}},{key:"onChange",value:function(t){this._onChangeCallback=t}},{key:"getData",value:function(){var t=(this._frame.getMinX()-this._basePoint.x)/this._image.getScale(),e=(this._frame.getMinY()-this._basePoint.y)/this._image.getScale(),n=this._frame.getRect().size.width/this._image.getScale(),i=this._frame.getRect().size.width/this._image.getScale();return{origin:{x:t,y:e},size:{width:n,height:i}}}},{key:"setData",value:function(t){var e=this._frame.getRect().size.width/t.size.width,n=(e-this._image.getOriginScale())/this._image.getOriginScale();this.setZoom(n);var i=this._frame.getMinX()-t.origin.x*this._image.getScale(),r=this._frame.getMinY()-t.origin.y*this._image.getScale(),o=new b(i,r);return this._resetPoints(),this._drawImage(o),{origin:o,zoom:n}}},{key:"_resetPoints",value:function(){return this._lastPoint=new b(0,0),this._basePoint=new b(0,0),this}},{key:"_centerImagePoint",value:function(){var t=this._frame.getMidX()-this._image.getSize().width/2,e=this._frame.getMidY()-this._image.getSize().height/2;return new b(t,e)}},{key:"_validatePoint",value:function(t){var e=t;return this._image.getSize().width<this._frame.getRect().size.width?e.x=this._centerImagePoint().x:t.x>this._frame.getMinX()?e.x=this._frame.getMinX():t.x+this._image.getSize().width<this._frame.getMaxX()?e.x=this._frame.getMaxX()-this._image.getSize().width:e.x=t.x,this._image.getSize().height<this._frame.getRect().size.height?e.y=this._centerImagePoint().y:t.y>this._frame.getMinY()?e.y=this._frame.getMinY():t.y+this._image.getSize().height<this._frame.getMaxY()?e.y=this._frame.getMaxY()-this._image.getSize().height:e.y=t.y,e}},{key:"_drawImage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new b(0,0);this.clear(),this._drawBackground();var e=this._basePoint.x+(t.x-this._lastPoint.x),n=this._basePoint.y+(t.y-this._lastPoint.y);return this._basePoint=this._validatePoint(new b(e,n)),this._lastPoint=t,this._context.drawImage(this._image.getNode(),this._basePoint.x,this._basePoint.y,this._image.getSize().width,this._image.getSize().height),this._cutout.draw(),this._onChangeCallback(this),this}},{key:"_drawBackground",value:function(){var t=this._context.createPattern(this._pattern.getNode(),"repeat");return this._context.rect(0,0,this.getNode().width,this.getNode().height),this._context.fillStyle(t),this._context.fill(),this}}]),e}(g),E=function(t){function e(){u(this,e);var t=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"input"));return t.setType("range"),t.addClass("slider"),t.setAttribute("min",0),t.setAttribute("max",100),t.setAttribute("value",0),t._onChangeCallback=function(){},t._onChangeHandler=t._onChange.bind(t),t}return f(e,t),c(e,[{key:"onChange",value:function(t){return this._onChangeCallback=t,this.getNode().addEventListener("change",this._onChangeHandler,!1),this.getNode().addEventListener("input",this._onChangeHandler,!1),this}},{key:"setValue",value:function(t){return this.getNode().value=t,this}},{key:"_onChange",value:function(){this._onChangeCallback(Number(this.getNode().value))}}]),e}(g),M=function(t){function e(t){u(this,e);var n=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"svg"));return n.setAttribute("class","icon icon-"+t),n._use=new g("use"),n._use.getNode().setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#icon-"+t),n._use.render(n.getNode()),n}return f(e,t),e}(g),z=function(){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,r),e(t),this._canvas=new N,this._image=new m,this._slider=new E,this.setWidth(t.width||s.width),this.setHeight(t.height||s.height),this._onInitCallback=i(t.onInit),this._onChangeCallback=i(t.onChange)}return c(r,[{key:"render",value:function(e){var n=this;this._node=t(e);var i=new g;i.addClass("image-crop"),i.render(this._node),this._canvas.render(i.getNode());var r=new g;r.addClass("image-crop-tools"),r.render(i.getNode());var o=new g;o.addClass("image-crop-zoom"),o.render(r.getNode());var s=new M("frame-landscape"),a=new M("frame-landscape");return s.render(o.getNode()),this._slider.render(o.getNode()),this._slider.onChange(function(t){n._canvas.setZoom(t/100)}),a.render(o.getNode()),this._onInitCallback(this),this._canvas.onChange(function(){n._onChangeCallback(n)}),this}},{key:"setWidth",value:function(t){try{n(t)}catch(t){throw Error("Width property: "+t.message)}return this._canvas.setWidth(t),this._canvas.redraw(),this}},{key:"setHeight",value:function(t){try{n(t)}catch(t){throw Error("Height property: "+t.message)}return this._canvas.setHeight(t),this._canvas.redraw(),this}},{key:"loadImage",value:function(t){var e=this;if(!t)throw Error("Image url or path is not passed.");if("string"!=typeof t)throw Error("Invalid url or path.");return this._image.load(t).then(function(t){return e._canvas.setImage(t),e._canvas.draw(),e._slider.setValue(0),e})}},{key:"getCroppedImage",value:function(){return this._canvas.toDataURL()}},{key:"setZoom",value:function(t){try{n(t)}catch(t){throw Error("Zoom property: "+t.message)}return this._canvas.setZoom(t),this._slider.setValue(100*t),this}},{key:"reset",value:function(){return this.setZoom(0),this._canvas.redraw(),this}},{key:"getData",value:function(){return this._canvas.getData()}},{key:"setData",value:function(t){var e=this._canvas.setData(t),n=e.zoom;return this._slider.setValue(100*n),this}}]),r}();return z}();
